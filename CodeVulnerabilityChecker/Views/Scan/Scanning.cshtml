@model CodeVulnerabilityChecker.Models.ContentViewModel

@{
    ViewBag.Title = "Run a Scan";
}

<h2>Scanning</h2>
@if (User.IsInRole("User") || User.IsInRole("Admin"))
{
<div>
    <div class="text-code-input-area">
        <h3>@Html.DisplayFor(model => model.SnippetTitle)</h3>
        <p class="lead">by @Html.DisplayFor(model => model.SnippetOwner)</p>
        <p class="lead">Uploaded: @Html.DisplayFor(model => model.SnippetDate)</p>
        <br />

        <h3>Source Code:</h3>
        @Html.TextAreaFor(model => model.SnippetContent, new { htmlAttributes = new { @class = "form-control", @runat = "server" } })

        <script type="text/javascript" src="~/Scripts/codemirror-2.37/lib/codemirror.js"></script>
        <link rel="stylesheet" href="../Scripts/codemirror-2.37/lib/codemirror.css">
        <script type="text/javascript" src="~/Scripts/codemirror-2.37/mode/clike/clike.js"></script>

        <script type="text/javascript">
            var options = {
                mode: "javascript",
                theme: "default",
                lineNumbers: true,
                smartIndent: true,
                viewportMargin: Infinity,
                readOnle: true
            };

            var myCodeMirror = CodeMirror.fromTextArea(SnippetContent, options);
        </script>
    </div>

    @Html.ActionLink("Start Scan", "Results", null, new { @class = "btn btn-default" })
    @Html.ActionLink("Cancel Scan", "EndScan", null, new { @class = "btn btn-secondary" })

</div>

    }
    else
    {
    <h2> You must @Html.ActionLink("sign in", "Login", "Account") to use the code scanner </h2>
    }
